<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Outlock Base</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
</head>
<body>
    <header>
        <div id="titulo">
            <button class="menu">
               <img id="imgMenu" src="588a64e0d06f6719692a2d10.png" alt="" srcset="">
            </button>
            <img src="logotec (weld).png">
            <div> <h1>MINUTAS</h1>
            <p>Luis Carlos Esteban Longares Vidal</p>
            </div>
        </div>
        <div id="seccion">
            <input id="buscador" type="search" placeholder="">
            <i id="buscar" class="material-icons">search</i>
        </div>
    </header>
    <div class="content">
        <aside class="sidebar">
            <a id="apartado-minutas" href="index.html">Minutas</a>
            <a id="apartado-empleados" href="Empleados.html">Empleados</a>
            <a id="apartado-departamentos" href="departamento.html">Departamentos</a>
            <a id="apartado-configuracion" href="configuracion.html">Configuracion</a>
            <a id="apartado-perfil" href="perfil.html">Perfil</a>
            <a id="apartado-sesion" href="login.html">Cerrar Sesi√≥n</a>
        </aside>
        <main>
            <form id="perfil">
                <h3><span>#4455 </span>ADMINISTRADOR <span></h3>
                <div class="campos-container">
                    <div class="datos">
                        <label>Nombre</label>
                        <label>Correo Electr√≥nico</label>
                        <label>Fecha de Nacimiento</label>
                        <label>Contrase√±a</label>
                    </div>
                    <div class="editables" data-section="perfil">
                        <div>
                            <input id="perfilNombre" type="text" value="Luis Carlos Longares Vidal" disabled>
                            <button data-input="perfilNombre" class="btnEditarPerfil editarbtns" title="Editar">üñâ</button>
                            <button class="GuardarPerfil editarbtns">‚úîÔ∏è</button>
                            <button class="CancelarPerfil editarbtns">‚ùå</button>
                        </div>
                        <div>
                            <input id="perfilCorreo" type="text" value="lglv@rcarbonifera.tecnm.mx" disabled>
                            <button data-input="perfilCorreo" class="btnEditarPerfil editarbtns" title="Editar">üñâ</button>
                            <button class="GuardarPerfil editarbtns">‚úîÔ∏è</button>
                            <button class="CancelarPerfil editarbtns">‚ùå</button>
                        </div>
                        <div>
                            <input id="perfilNacimiento" type="datetime" value="02/03/85" disabled>
                            <button disabled data-input="perfilNacimiento" class="btnEditarPerfil editarbtns" title="Editar">üñâ</button>
                            <button class="GuardarPerfil editarbtns">‚úîÔ∏è</button>
                            <button class="CancelarPerfil editarbtns">‚ùå</button>
                        </div>
                        <div>
                            <input id="perfilContrase√±a" type="password" value="contrase√±a" disabled>
                            <button data-input="perfilContrase√±a" class="btnEditarPerfil editarbtns" title="Editar">üñâ</button>
                            <button class="GuardarPerfil editarbtns">‚úîÔ∏è</button>
                            <button class="CancelarPerfil editarbtns">‚ùå</button>
                        </div>
                    </div>
                </div>
            </form>

            <!-- Editar perfil
            <div id="modalEditarPerfil" class="modal">
                <form>
                    <h3>Editar Perfil</h3>
                    <div>
                        <div>
                            <label>Nombre</label>
                            <input type="text" value="Luis Carlos Longares Vidal">
                        </div>
                        <div>
                            <label>Correo Electronico</label>
                            <input type="text" value="lglv@rcarbonifera.tecnm.mx"> 
                        </div>
                        <div>
                            <label>Fecha de Nacimiento</label>
                            <input type="datetime" placeholder="02/03/85" disabled>
                        </div>
                        <div>
                             <label>Contrase√±a</label>
                            <input type="password" value="contrase√±a">
                        </div>
                       
                    </div><br>
                    <div class="buttons">
                        <input type="button" value="Cancelar">
                        <input type="button" value="Guardar cambios">
                    </div>
                    
                </form>
            </div> -->
            
        </main>
    </div>
        <script>
        const menu = document.querySelector('.menu');
        const sidebar = document.querySelector('.sidebar');
        const header =document.querySelector("header");



        inicializarEditables('[data-section="perfil"]');
        inicializarEditables('[data-section="correo"]');

        function inicializarEditables(sectionSelector) {
        const seccion = document.querySelector(sectionSelector);
        if (!seccion) return;

        const botonesEditar = seccion.querySelectorAll(".btnEditarPerfil");

        botonesEditar.forEach(btn => {
            btn.addEventListener("click", (e) => {
            e.preventDefault();
            const campoId = btn.dataset.input;

            // Deshabilitar todos los inputs de esta secci√≥n
            seccion.querySelectorAll("input, select").forEach(input => {
                input.disabled = true;
                input.classList.remove("active");
            });

            // Ocultar todos los botones de esta secci√≥n
            seccion.querySelectorAll(".GuardarPerfil, .CancelarPerfil").forEach(b => b.style.display = "none");
            seccion.querySelectorAll(".btnEditarPerfil").forEach(b => b.style.display = "inline");

            // Activar solo el campo correspondiente
            const campo = document.getElementById(campoId);
            campo.disabled = false;
            campo.classList.add("active");
            campo.focus();

            // Mostrar botones de guardar/cancelar solo para este campo
            const divPadre = btn.closest("div");
            btn.style.display = "none";
            divPadre.querySelector(".GuardarPerfil").style.display = "inline";
            divPadre.querySelector(".CancelarPerfil").style.display = "inline";
            });
        });
        }





        // // editar perfil
        // const btnEditarPerfil = document.querySelectorAll(".btnEditarPerfil");
        // const editables = document.querySelectorAll(".editables input");

        // btnEditarPerfil.forEach(btn => {
        // btn.addEventListener("click", (e) => {
        //     e.preventDefault();

        //     const inputId = btn.dataset.input;

        //     editables.forEach(input => {
        //         input.disabled = true;
        //         input.classList.remove("active");
        //     });

        //     const perfilInput = document.getElementById(inputId);
        //     perfilInput.disabled = false;
        //     perfilInput.focus();
        //     perfilInput.classList.add("active");
        //     // para ocultar los btn de guardar y cancelar del q clickee
        //     document.querySelectorAll(".editables > div").forEach(div => {
        //     div.querySelector(".GuardarPerfil").style.display = "none";
        //     div.querySelector(".CancelarPerfil").style.display = "none";
        //     div.querySelector(".btnEditarPerfil").style.display = "inline";
        //     });

        //     // se oculta editar y vuelve el btn de guardar y can
        //     const parentDiv = btn.closest("div");
        //     btn.style.display = "none";
        //     parentDiv.querySelector(".GuardarPerfil").style.display = "inline";
        //     parentDiv.querySelector(".CancelarPerfil").style.display = "inline";
        // });
        // });

        document.querySelector("#buscar").addEventListener("click",function (){
            header.classList.toggle("buscar");
           
        });

        // este es solo de MUESTRA al momento de usar el buscador
        const buscador = document.querySelector("#buscador");
        buscador.addEventListener("input", function(){
             if (buscador.value.length > 0) {
                setTimeout(function(){
                    window.location.href = "index.html";
                }, 1000);
                
            }
        })
        //Sidebar
        menu.addEventListener('click', () => {
            sidebar.classList.toggle('active');
        });
 
 
        const agregar = document.querySelector("#agregar");
        sidebar.addEventListener("click", function(e){
            if(e.target.tagName == "I"){
                agregar.style.visibility="visible";
            }
 
        });
 
        //CambioEnMovilDeminuta
        const Lista=document.querySelector('.minutas-list');
        const minutasContent=document.querySelector('.minuta-content');
        const minutas=document.querySelector('.minutas');
 
        minutas.addEventListener('click',(e)=>{
            if(!e.target.classList.contains('filtros') && !e.target.parentElement.parentElement.classList.contains('filtros')  && !e.target.parentElement.classList.contains('filtros')){
               
                minutasContent.classList.toggle('active');
                console.log(e.target.parentElement.classList.contains('filtros'));
                Lista.classList.toggle('inactive');
            }
        });
 
 
       
 
        history.pushState(null, "", location.href);
 
        window.addEventListener("popstate", function () {
            Lista.classList.toggle('inactive');
        console.log("Intento de salir con bot√≥n de retroceso");
        history.pushState(null, "", location.href); // Reagrega el estado para evitar la salida
        });
 
 
 
        document.addEventListener("click", function (event) {

            if (!sidebar.contains(event.target ) && !menu.contains(event.target)) {
                if (sidebar.classList.contains('active')) {
                    sidebar.classList.remove('active');
            console.log('click en sidebar');
 
                }
            }
        });
    </script>
</body>
</html>